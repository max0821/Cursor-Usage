# Cursor 用量統計面板 (Cursor Usage Stats Panel)

這是一個 [Tampermonkey](https://www.tampermonkey.net/) 使用者腳本，專為 [Cursor](https://cursor.com) 設計。它會在您的儀表板頁面 (`/dashboard`) 新增一個功能強大的浮動統計面板，讓您能夠深入分析您的 AI 模型使用量、花費以及趨勢。

![腳本介面截圖](https://github.com/max0821/Cursor-Usage/blob/main/cursor_usage_demo.jpg?raw=true)

---

## ✨ 功能亮點

這個腳本解決了官方儀表板缺乏詳細統計和趨勢分析的問題，提供了以下核心功能：

- **📊 互動式浮動面板**:
  - 介面可隨意拖動，位置自由。
  - 所有數據都在同一個面板中呈現，一目了然。

- **📈 詳細數據統計**:
  - **請求次數**: 統計所有成功計費的請求。
  - **Token 分析**: 精確計算輸入、輸出、快取讀取和快取寫入的 Token 總量。
  - **總花費**: 加總所有費率，提供精確到小數點後四位的美元花費。

- **📅 彈性的日期查詢**:
  - **快速按鈕**: 提供「今天」、「7 天」、「30 天」的常用時間範圍供您一鍵查詢。
  - **自訂日期選擇器**: 支援互動式月曆，您可以自由選取任何時間區間進行查詢。
  - **智慧記憶**: 自動儲存您上次查詢的日期範圍，下次打開頁面時會自動載入。

- **📉 視覺化趨勢圖**:
  - 內建基於 [Chart.js](https://www.chartjs.org/) 的每日花費折線圖。
  - 將您的總花費按天呈現，讓您輕鬆掌握使用量的高峰與低谷。

- **🚀 強大且可靠的數據獲取**:
  - **自動翻頁**: 當用量紀錄超過一頁時，腳本會自動在背景請求所有分頁並合併數據，確保統計 100% 完整。
  - **智慧過濾**: 自動排除所有未計費、錯誤、或由您個人 API Key 產生的請求，確保統計範圍的純粹性。
  - **時區同步**: 所有日期計算均以 **UTC+0** 為標準，與 Cursor 官方後台的邏輯完全一致，消除了時差導致的數據偏差。

---

## 🔧 安裝教學

1.  **安裝使用者腳本管理器 (必要)**
    - 您需要在您的瀏覽器上先安裝一個使用者腳本管理器。最推薦的是 [**Tampermonkey**](https://www.tampermonkey.net/)，它支援 Chrome, Firefox, Edge, Safari 等主流瀏覽器。

2.  **點擊安裝腳本**
    - [**➡️ 點擊此處直接安裝腳本**](https://raw.githubusercontent.com/max0821/Cursor-Usage/main/cursor_usage.userscript.js)
    - 點擊上方連結後，Tampermonkey 會自動打開一個新的分頁，顯示腳本的原始碼和資訊。
    - 在該分頁上，點擊「安裝」(Install) 按鈕即可完成。

---

## 📖 使用指南

1.  安裝並啟用腳本後，打開或重新整理您的 [Cursor 儀表板頁面](https://cursor.com/cn/dashboard)。
2.  腳本的浮動面板會自動出現在畫面的左下角。
3.  **快速查詢**:
    - 點擊「今天」、「7 天」或「30 天」按鈕，腳本會立即查詢並顯示對應時間範圍的數據。被選中的按鈕會高亮顯示。
4.  **自訂查詢**:
    - 點擊下方的兩個日期輸入框，會彈出月曆。
    - 分別選擇您想要的「開始日期」和「結束日期」。
    - 點擊右側的「查詢」按鈕，即可分析您自訂的時間範圍。
5.  **查看結果**:
    - 面板上方的表格會顯示詳細的統計總數。
    - 面板下方的圖表會顯示每日的花費趨勢。
6.  **移動面板**:
    - 按住面板最上方的標題欄，即可將其拖動到螢幕上的任何位置。

---

## 📄 授權

本腳本採用 [MIT License](https://opensource.org/licenses/MIT) 授權。
